#!/bin/bash

#SBATCH --nodes=2
#SBATCH --ntasks-per-node=138
#SBATCH --job-name same_node_nonblock_ring
#SBATCH --output=%x_%j.out
#SBATCH --error=%x_%j.err


module purge
module load GCC/12.3.0 OpenMPI/5.0.0

# AMD20 cluster has 207 nodes, and the capacity of cores for each node is 128 = 2^7
# we can run n = 2^1, 2^2, ..., 2^7, 2^8
mpiexec -n 4 nonblock_ring > same_node_nonblock_ring.csv
